import{k as x,r as f,l as e,B as y,N as v}from"./index-BFlqfnX8.js";import{u as S,F as o,C as i,s as b,a as l,o as k,b as m}from"./types-D8eYJC-E.js";import{I as c}from"./index-Cc3DaH-3.js";const I=k({email:m().min(1,"email required").email("Please enter correct email"),password:m().min(1,"Password required")});function F(){const d=x(),p=a=>{d(a)},u=f.useRef(null),{control:t,handleSubmit:h,formState:{errors:s}}=S({resolver:b(I),defaultValues:{email:"",password:""}});async function g(a){try{const r=await fetch("https://todo-redev.herokuapp.com/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){const j=await r.json();throw new Error(j.message||"Login failed")}const n=await r.json();return l.success("Login successful!"),localStorage.setItem("myToken",n.token),p("/task"),n}catch(r){l.error(r.message),console.log("error: ",r)}}const w=async a=>{await g(a)};return e.jsxs(e.Fragment,{children:[e.jsxs(o,{ref:u,onFinish:h(w),layout:"vertical",children:[e.jsx(o.Item,{label:"Email",validateStatus:s.email?"error":"",help:s.email?s.email.message:null,children:e.jsx(i,{name:"email",control:t,render:({field:a})=>e.jsx(c,{...a,placeholder:"example@mail.com",autoComplete:"email"})})}),e.jsx(o.Item,{label:"Password",validateStatus:s.password?"error":"",help:s.password?s.password.message:null,children:e.jsx(i,{name:"password",control:t,render:({field:a})=>e.jsx(c.Password,{...a,placeholder:"Please enter password",autoComplete:"new-password"})})}),e.jsx(o.Item,{children:e.jsx(y,{type:"primary",htmlType:"submit",children:"Log In"})})]}),e.jsxs("p",{children:["Don't have an account? ",e.jsx(v,{to:"/registration",children:"Sign Up!"})]})]})}export{F as LoginPage};
