import{k as x,r as f,l as e,B as y,N as v}from"./index-nY8nNody.js";import{u as S,F as o,C as i,s as b,o as k,a as l}from"./types-BAjNrEAS.js";import{I as m,s as c}from"./index-D0bJF_an.js";const I=k({email:l().min(1,"email required").email("Please enter correct email"),password:l().min(1,"Password required")});function F(){const d=x(),p=s=>{d(s)},u=f.useRef(null),{control:t,handleSubmit:h,formState:{errors:a}}=S({resolver:b(I),defaultValues:{email:"",password:""}});async function g(s){try{const r=await fetch("https://todo-redev.herokuapp.com/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok){const j=await r.json();throw new Error(j.message||"Login failed")}const n=await r.json();return c.success("Login successful!"),localStorage.setItem("myToken",n.token),p("/task"),n}catch(r){c.error(r.message),console.log("error: ",r)}}const w=async s=>{await g(s)};return e.jsxs(e.Fragment,{children:[e.jsxs(o,{ref:u,onFinish:h(w),layout:"vertical",children:[e.jsx(o.Item,{label:"Email",validateStatus:a.email?"error":"",help:a.email?a.email.message:null,children:e.jsx(i,{name:"email",control:t,render:({field:s})=>e.jsx(m,{...s,placeholder:"example@mail.com",autoComplete:"email"})})}),e.jsx(o.Item,{label:"Password",validateStatus:a.password?"error":"",help:a.password?a.password.message:null,children:e.jsx(i,{name:"password",control:t,render:({field:s})=>e.jsx(m.Password,{...s,placeholder:"Please enter password",autoComplete:"new-password"})})}),e.jsx(o.Item,{children:e.jsx(y,{type:"primary",htmlType:"submit",children:"Log In"})})]}),e.jsxs("p",{children:["Don't have an account? ",e.jsx(v,{to:"/registration",children:"Sign Up!"})]})]})}export{F as LoginPage};
